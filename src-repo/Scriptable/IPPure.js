// IPPure + IP-API ÁªºÂêàÁõëÊµãÁªÑ‰ª∂ - ÊúÄÁªà‰ºòÂåñÁâà
const geoUrl = "http://ip-api.com/json/?lang=zh-CN";
const riskUrl = "https://my.ippure.com/v1/info";

// --- È¢ÑÂä†ËΩΩÂ≠óÂÖ∏ ---
const S_CHARS = 'ÈîïÁöëËîºÁ¢çÁà±Âó≥Â´íÁë∑ÊößÈú≠Ë∞ôÈìµÈπåËÇÆË¢ÑÂ••Â™™È™úÈ≥åÂùùÁΩ¢ÈíØÊëÜË¥•ÂëóÈ¢ÅÂäûÁªäÈí£Â∏ÆÁªëÈïëË∞§Ââ•È•±ÂÆùÊä•È≤çÈ∏®ÈæÖËæàË¥ùÈí°ÁãàÂ§áÊÉ´ÈπéË¥≤ÈîõÁª∑Á¨îÊØïÊØôÂ∏ÅÈó≠ËçúÂìîÊªóÈìãÁ≠öË∑∏ËæπÁºñË¥¨ÂèòËæ©Ëæ´ËãÑÁºèÁ¨æÊ†áÈ™†È£ëÈ£ôÈïñÈï≥È≥îÈ≥ñÂà´Áò™ÊøíÊª®ÂÆæÊëàÂÇßÁº§ÊßüÊÆ°ËÜëÈïîÈ´åÈ¨ìÈ•ºÁ¶ÄÊã®ÈíµÈìÇÈ©≥È•ΩÈíπÈπÅË°•Èí∏Ë¥¢ÂèÇËöïÊÆãÊÉ≠ÊÉ®ÁÅøÈ™ñÈª™ËãçËà±‰ªìÊ≤ßÂéï‰æßÂÜåÊµãÊÅªÂ±ÇËØßÈî∏‰æ™ÈíóÊêÄÊé∫ËùâÈ¶ãË∞óÁº†Èì≤‰∫ßÈòêÈ¢§ÂÜÅË∞ÑË∞∂ËíáÂøèÂ©µÈ™£ËßáÁ¶ÖÈï°Âú∫Â∞ùÈïøÂÅøËÇ†ÂéÇÁïÖ‰º•ËãåÊÄÖÈòäÈ≤≥ÈíûËΩ¶ÂΩªÁ†óÂ∞òÈôàË°¨‰ºßË∞åÊ¶áÁ¢úÈæÄÊíëÁß∞ÊÉ©ËØöÈ™ãÊû®ÊüΩÈìñÈìõÁó¥ËøüÈ©∞ËÄªÈΩøÁÇΩÈ•¨È∏±ÂÜ≤ÂÜ≤Ëô´ÂÆ†Èì≥Áï¥Ë∏åÁ≠πÁª∏‰ø¶Â∏±Èõ†Ê©±Âé®ÈîÑÈõèÁ°ÄÂÇ®Ëß¶Â§ÑÂàçÁªåËπ∞‰º†ÈíèÁñÆÈóØÂàõÊÄÜÈî§ÁºçÁ∫ØÈπëÁª∞ËæçÈæäËæûËØçËµêÈπöËÅ™Ëë±Âõ±‰ªé‰∏õËãÅÈ™¢ÊûûÂáëËæèËπøÁ™úÊí∫ÈîôÈîâÈπæËææÂìíÈûëÂ∏¶Ë¥∑È™ÄÁªêÊãÖÂçïÈÉ∏Êé∏ËÉÜÊÉÆËØûÂºπÊÆöËµïÁòÖÁÆ™ÂΩìÊå°ÂÖöËç°Ê°£Ë∞†Á†ÄË£ÜÊç£Â≤õÁ•∑ÂØºÁõóÁÑòÁÅØÈÇìÈï´ÊïåÊ∂§ÈÄíÁºîÁ±¥ËØãË∞õÁª®ËßåÈïùÈ¢†ÁÇπÂû´ÁîµÂ∑ÖÈíøÁô´ÈíìË∞ÉÈì´È≤∑Ë∞çÂè†È≤ΩÈíâÈ°∂Èî≠ËÆ¢Èì§‰∏¢Èì•‰∏úÂä®Ê†ãÂÜªÂ≤ΩÈ∏´Á™¶ÁääÁã¨ËØªËµåÈïÄÊ∏éÊ§üÁâçÁ¨ÉÈª©ÈîªÊñ≠ÁºéÁ∞ñÂÖëÈòüÂØπÊÄºÈï¶Âê®È°øÈíùÁÇñË∂∏Â§∫Â†ïÈìéÈπÖÈ¢ùËÆπÊÅ∂È•øË∞îÂû©ÈòèËΩ≠ÈîáÈî∑ÈπóÈ¢öÈ¢õÈ≥ÑËØ∂ÂÑøÂ∞îÈ•µË¥∞Ëø©ÈìíÈ∏∏È≤ïÂèëÁΩöÈòÄÁèêÁüæÈííÁÉ¶Ë¥©È•≠ËÆøÁ∫∫Èí´È≤ÇÈ£ûËØΩÂ∫üË¥πÁªØÈïÑÈ≤±Á∫∑ÂùüÂ•ãÊÑ§Á≤™ÂÅæ‰∏∞Êû´ÈîãÈ£éÁñØÂÜØÁºùËÆΩÂá§Ê≤£ËÇ§ËæêÊäöËæÖËµãÂ§çË¥üËÆ£Â¶áÁºöÂá´È©∏ÁªÇÁªãËµôÈ∫∏È≤ãÈ≥ÜÈíÜËØ•ÈíôÁõñËµÖÊùÜËµ∂ÁßÜËµ£Â∞¥ÊìÄÁªÄÂÜàÂàöÈí¢Á∫≤Â≤óÊàÜÈïêÁùæËØ∞ÁºüÈîÜÊêÅÈ∏ΩÈòÅÈì¨‰∏™Á∫•ÈïâÈ¢çÁªô‰∫òËµìÁª†È≤†ÈæöÂÆ´Â∑©Ë¥°Èí©Ê≤üËãüÊûÑË¥≠Â§üËØüÁºëËßèËõäÈ°æËØÇÊØÇÈí¥Èî¢È∏™ÈπÑÈπòÂâêÊåÇÈ∏πÊé¥ÂÖ≥ËßÇÈ¶ÜÊÉØË¥ØËØñÊéºÈπ≥È≥èÂπøÁä∑ËßÑÂΩíÈæüÈó∫ËΩ®ËØ°Ë¥µÂàΩÂå¶ÂàøÂ¶´Ê°ßÈ≤ëÈ≥úËæäÊªöË°ÆÁª≤È≤ßÈîÖÂõΩËøáÂüöÂëôÂ∏ºÊ§ÅËùàÈì™È™áÈü©Ê±âÈòöÁªóÈ¢âÂè∑ÁÅèÈ¢¢ÈòÇÈπ§Ë¥∫ËØÉÈòñËõéÊ®™ËΩ∞È∏øÁ∫¢ÈªâËÆßËç≠Èó≥È≤éÂ£∂Êä§Ê≤™Êà∑ÊµíÈπïÂìóÂçéÁîªÂàíËØùÈ™ÖÊ°¶ÈìßÊÄÄÂùèÊ¨¢ÁéØËøòÁºìÊç¢Âî§Áó™ÁÑïÊ∂£Â•ÇÁº≥ÈîæÈ≤©ÈªÑË∞éÈ≥áÊå•ËæâÊØÅË¥øÁßΩ‰ºöÁÉ©Ê±áËÆ≥ËØ≤ÁªòËØôËçüÂìïÊµçÁºãÁè≤ÊôñËç§ÊµëËØ®È¶ÑÈòçËé∑Ë¥ßÁ•∏Èí¨Èï¨ÂáªÊú∫ÁßØÈ••ËøπËÆ•È∏°Áª©ÁºâÊûÅËæëÁ∫ßÊå§Âá†ËìüÂâÇÊµéËÆ°ËÆ∞ÈôÖÁªßÁ∫™ËÆ¶ËØòËç†ÂèΩÂìúÈ™•ÁéëËßäÈΩëÁü∂ÁæÅËôøË∑ªÈúÅÈ≤öÈ≤´Â§πËçöÈ¢äË¥æÈíæ‰ª∑È©æÈÉèÊµÉÈìóÈïìËõ≤Ê≠ºÁõëÂùöÁ¨∫Èó¥Ëâ∞ÁºÑËåßÊ£ÄÁ¢±Á°∑Êã£Êç°ÁÆÄ‰ø≠ÂáèËçêÊßõÈâ¥Ë∑µË¥±ËßÅÈîÆËà∞ÂâëÈ•ØÊ∏êÊ∫ÖÊ∂ßË∞èÁº£ÊàãÊà¨ÁùëÈπ£Á¨ïÈ≤£ÈûØÂ∞ÜÊµÜËíãÊ°®Â•ñËÆ≤ÈÖ±ÁªõÁº∞ËÉ∂ÊµáÈ™ÑÂ®áÊêÖÈì∞Áü´‰æ•ËÑöÈ•∫Áº¥ÁªûËΩøËæÉÊå¢Â≥§Èπ™È≤õÈò∂ËäÇÊ¥ÅÁªìËØ´Â±äÁññÈ¢åÈ≤íÁ¥ßÈî¶‰ªÖË∞®ËøõÊôãÁÉ¨Â∞ΩÂä≤ËçÜËåéÂç∫Ëç©È¶ëÁºôËµÜËßêÈ≤∏ÊÉäÁªèÈ¢àÈùôÈïúÂæÑÁóâÁ´ûÂáÄÂà≠Ê≥æËø≥Âº™ËÉ´ÈùìÁ∫†Âé©ÊóßÈòÑÈ∏†Èπ´È©π‰∏æÊçÆÈîØÊÉßÂâßËÆµÂ±¶Ê¶âÈ£ìÈíúÈîîÁ™≠ÈæÉÈπÉÁª¢Èî©ÈïåÈöΩËßâÂÜ≥ÁªùË∞≤ÁèèÈíßÂÜõÈ™èÁö≤ÂºÄÂáØÂâÄÂû≤ÂøæÊÅ∫Èì†Èî¥ÈæõÈó∂Èí™ÈìêÈ¢óÂ£≥ËØæÈ™íÁºÇËΩ≤Èí∂ÈîûÈ¢îÂû¶ÊÅ≥ÈæàÈìøÊä†Â∫ìË£§ÂñæÂùó‰æ©ÈÉêÂìôËÑçÂÆΩÁãØÈ´ãÁüøÊó∑ÂÜµËØìËØ≥ÈÇùÂúπÁ∫©Ë¥∂‰∫èÂ≤øÁ™•È¶àÊ∫ÉÂåÆËíâÊÑ¶ËÅ©ÁØëÈòÉÈîüÈ≤≤Êâ©ÈòîËõ¥Ëú°ËÖäËé±Êù•ËµñÂ¥ÉÂæïÊ∂ûÊøëËµâÁùêÈìºÁôûÁ±ÅËìùÊ†èÊã¶ÁØÆÈòëÂÖ∞ÊæúË∞∞ÊèΩËßàÊáíÁºÜÁÉÇÊª•Â≤öÊ¶ÑÊñìÈïßË§¥ÁêÖÈòÜÈîíÊçûÂä≥Ê∂ùÂî†Â¥ÇÈìëÈìπÁó®‰πêÈ≥ìÈï≠ÂûíÁ±ªÊ≥™ËØîÁºßÁØ±Áã∏Á¶ªÈ≤§Á§º‰∏ΩÂéâÂä±Á†æÂéÜÊ≤•Èö∂‰ø™ÈÉ¶ÂùúËãàËéÖËì†ÂëñÈÄ¶È™äÁº°Êû•Ê†éËΩπÁ†∫ÈîÇÈπÇÁñ†Á≤ùË∑ûÈõ≥È≤°È≥¢‰ø©ËÅîËé≤ËøûÈï∞ÊÄúÊ∂üÂ∏òÊïõËÑ∏ÈìæÊÅãÁÇºÁªÉËîπÂ•ÅÊΩãÁêèÊÆìË£¢Ë££È≤¢Á≤ÆÂáâ‰∏§ËæÜË∞ÖÈ≠âÁñóËæΩÈï£Áº≠ÈíåÈπ©Áåé‰∏¥ÈÇªÈ≥ûÂáõËµÅËî∫Âª™Ê™©ËæöË∫èÈæÑÈìÉÁÅµÂ≤≠È¢ÜÁª´Ê£ÇËõèÈ≤ÆÈ¶èÂàòÊµèÈ™ùÁª∫ÈïèÈπ®ÈæôËÅãÂíôÁ¨ºÂûÑÊã¢ÈôáËåèÊ≥∑ÁèëÊ†äËÉßÁ†ªÊ•ºÂ®ÑÊêÇÁØìÂÅªËíåÂñΩÂµùÈïÇÁòòËÄßËùºÈ´ÖËä¶Âç¢È¢ÖÂ∫êÁÇâÊé≥Âç§ËôèÈ≤ÅËµÇÁ¶ÑÂΩïÈôÜÂûÜÊí∏ÂôúÈóæÊ≥∏Ê∏åÊ†åÊ©πËΩ≥ËæÇËæòÊ∞áËÉ™È∏¨Èπ≠ËàªÈ≤àÂ≥¶ÊåõÂ≠™Êª¶‰π±ËÑîÂ®àÊ†æÈ∏æÈäÆÊä°ËΩÆ‰º¶‰ªëÊ≤¶Á∫∂ËÆ∫ÂõµËêùÁΩóÈÄªÈî£ÁÆ©È™°È™ÜÁªúËç¶Áå°Ê≥∫Ê§§ËÑ∂ÈïôÈ©¥ÂêïÈìù‰æ£Â±°ÁºïËôëÊª§ÁªøÊ¶àË§õÈîäÂëíÂ¶àÁéõÁ†ÅËöÇÈ©¨È™ÇÂêóÂîõÂ¨∑Êù©‰π∞È∫¶ÂçñËøàËÑâÂä¢ÁûíÈ¶íËõÆÊª°Ë∞©Áº¶ÈïòÈ¢°È≥óÁå´ÈîöÈìÜË¥∏È∫ΩÊ≤°ÈïÅÈó®Èó∑‰ª¨Êâ™ÁÑñÊáëÈíîÈî∞Ê¢¶ÁúØË∞úÂº•ËßÖÂπÇËäàË∞ßÁåïÁ•¢ÁªµÁºÖÊ∏ëËÖºÈªæÂ∫ôÁºàÁº™ÁÅ≠ÊÇØÈóΩÈóµÁºóÈ∏£Èì≠Ë∞¨Ë∞üËì¶È¶çÊÆÅÈïÜË∞ã‰∫©ÈíºÂëêÈí†Á∫≥ÈöæÊå†ËÑëÊÅºÈóπÈìôËÆ∑È¶ÅÂÜÖÊãüËÖªÈìåÈ≤µÊíµËæáÈ≤∂ÈÖøÈ∏üËåëË¢ÖËÅÇÂïÆÈïäÈïçÈôßËòñÂó´È¢üËπëÊü†ÁãûÂÆÅÊãßÊ≥ûËãéÂíõËÅçÈíÆÁ∫ΩËÑìÊµìÂÜú‰æ¨ÂìùÈ©ΩÈíïËØ∫ÂÇ©ÁñüÊ¨ßÈ∏•ÊÆ¥ÂëïÊ≤§ËÆ¥ÊÄÑÁìØÁõòËπíÂ∫ûÊäõÁñ±ËµîËæîÂñ∑ÈπèÁ∫∞ÁΩ¥ÈìçÈ™óË∞ùÈ™àÈ£òÁº•È¢ëË¥´Â´îËãπÂá≠ËØÑÊ≥ºÈ¢áÈíãÊâëÈì∫Êú¥Ë∞±Èï§Èï®Ê†ñËÑêÈΩêÈ™ëÂ≤ÇÂêØÊ∞îÂºÉËÆ´Ëï≤È™êÁªÆÊ°§Á¢õÈ¢ÄÈ¢ÉÈ≥çÁâµÈíéÈìÖËøÅÁ≠æË∞¶Èí±Èí≥ÊΩúÊµÖË∞¥Â†ë‰Ω•Ëç®ÊÇ≠È™ûÁº±Ê§†Èí§Êû™ÂëõÂ¢ôËî∑Âº∫Êä¢Â´±Ê®ØÊàóÁÇùÈîñÈîµÈï™ÁæüË∑ÑÈîπÊ°•‰πî‰æ®ÁøòÁ™çËØÆË∞ØËçûÁº≤Á°óË∑∑Á™ÉÊÉ¨Èî≤ÁÆßÈí¶‰∫≤ÂØùÈîìËΩªÊ∞¢ÂÄæÈ°∑ËØ∑Â∫ÜÊèøÈ≤≠ÁêºÁ©∑ËåïËõ±Â∑ØËµáËôÆÈ≥ÖË∂ãÂå∫Ë∫ØÈ©±ÈæãËØéÂ≤ñÈòíËßëÈ∏≤È¢ßÊùÉÂäùËØ†ÁªªËæÅÈì®Âç¥ÈπäÁ°ÆÈòïÈòôÊÇ´ËÆ©È•∂Êâ∞ÁªïËçõÂ®ÜÊ°°ÁÉ≠ÈüßËÆ§Á∫´È•™ËΩ´Ëç£ÁªíÂµòËùæÁºõÈì∑È¢¶ËΩØÈîêËö¨Èó∞Ê∂¶Ê¥íËê®È£íÈ≥ÉËµõ‰ºûÊØµÁ≥Å‰∏ßÈ™öÊâ´Áº´Ê∂©Âï¨ÈìØÁ©ëÊùÄÂàπÁ∫±Èì©È≤®Á≠õÊôíÈÖæÂà†Èó™ÈôïËµ°ÁºÆËÆ™ÂßóÈ™üÈíêÈ≥ùÂ¢í‰º§ËµèÂûßÊÆáËßûÁÉßÁªçËµäÊëÑÊÖëËÆæÂéçÊª†Áï≤ÁªÖÂÆ°Â©∂ËÇæÊ∏óËØúË∞ÇÊ∏ñÂ£∞Áª≥ËÉúÂ∏àÁãÆÊπøËØóÊó∂ËöÄÂÆûËØÜÈ©∂ÂäøÈÄÇÈáäÈ•∞ËßÜËØïË∞•ÂüòËé≥ÂºëËΩºË¥≥ÈìàÈ≤•ÂØøÂÖΩÁª∂Êû¢Ëæì‰π¶ËµéÂ±ûÊúØÊ†ëÁ´ñÊï∞ÊëÖÁ∫æÂ∏ÖÈó©ÂèåË∞ÅÁ®éÈ°∫ËØ¥Á°ïÁÉÅÈìÑ‰∏ùÈ•≤ÂéÆÈ©∑ÁºåÈî∂È∏∂ËÄ∏ÊÄÇÈ¢ÇËÆºËØµÊìûËñÆÈ¶äÈ£ïÈîºËãèËØâËÇÉË∞°Á®£ËôΩÈöèÁª•Â≤ÅË∞áÂ≠ôÊçüÁ¨ãËç™Áã≤Áº©ÁêêÈîÅÂî¢ÁùÉÁç≠ÊåûÈóºÈìäÈ≥éÂè∞ÊÄÅÈíõÈ≤êÊëäË¥™Áò´Êª©ÂùõË∞≠Ë∞àÂèπÊòôÈíΩÈî¨È°∏Ê±§ÁÉ´ÂÇ•È•ßÈì¥ÈïóÊ∂õÁª¶ËÆ®Èü¨ÈìΩËÖæË™äÈîëÈ¢ò‰ΩìÂ±âÁºáÈπàÈòóÊù°Á≤úÈæÜÈ≤¶Ë¥¥ÈìÅÂéÖÂê¨ÁÉÉÈìúÁªüÊÅ∏Â§¥Èí≠ÁßÉÂõæÈíçÂõ¢ÊäüÈ¢ìËúïÈ•®ËÑ±È∏µÈ©ÆÈ©ºÊ§≠ÁÆ®ÈºçË¢úÂ®≤ËÖΩÂºØÊπæÈ°Ω‰∏áÁ∫®ÁªæÁΩëËæãÈü¶ËøùÂõ¥‰∏∫ÊΩçÁª¥Ëãá‰ºü‰º™Á∫¨Ë∞ìÂç´ËØøÂ∏èÈó±Ê≤©Ê∂†ÁéÆÈü™ÁÇúÈ≤îÊ∏©ÈóªÁ∫πÁ®≥ÈóÆÈòåÁìÆÊåùËúóÊ∂°Á™ùÂçßËé¥ÈæåÂëúÈí®‰πåËØ¨Êó†ËäúÂê¥ÂùûÈõæÂä°ËØØÈÇ¨Â∫ëÊÄÉÂ¶©È™õÈπâÈπúÈî°Áâ∫Ë¢≠‰π†Èì£ÊàèÁªÜÈ•©ÈòãÁé∫ËßãËôæËæñÂ≥°‰æ†Áã≠Âé¶ÂêìÁ°ñÈ≤úÁ∫§Ë¥§Ë°îÈó≤ÊòæÈô©Áé∞ÁåÆÂéøÈ¶ÖÁæ°ÂÆ™Á∫øËããËé∂ËóìÂ≤òÁåÉÂ®¥ÈπáÁó´ËöùÁ±ºË∑πÂé¢Èï∂‰π°ËØ¶ÂìçÈ°πËäóÈ•∑È™ßÁºÉÈ£®ËêßÂö£ÈîÄÊôìÂï∏ÂììÊΩáÈ™ÅÁª°Êû≠ÁÆ´ÂçèÊåüÊê∫ËÉÅË∞êÂÜôÊ≥ªË∞¢‰∫µÊí∑ÁªÅÁº¨ÈîåË°ÖÂÖ¥ÈôâËç•Âá∂Ê±πÈîàÁª£È¶êÈ∏∫ËôöÂòòÈ°ªËÆ∏ÂèôÁª™Áª≠ËØ©È°ºËΩ©ÊÇ¨ÈÄâÁô£ÁªöË∞ñÈìâÈïüÂ≠¶Ë∞ëÊ≥∂È≥ïÂããËØ¢ÂØªÈ©ØËÆ≠ËÆØÈÄäÂüôÊµîÈ≤üÂéãÈ∏¶È∏≠Âìë‰∫öËÆ∂Âû≠Â®ÖÊ°†Ê∞©ÈòâÁÉüÁõê‰∏•Â≤©È¢úÈòéËâ≥ÂéåÁ†öÂΩ¶Ë∞öÈ™åÂé£Ëµù‰ø®ÂÖñË∞≥ÊÅπÈó´ÈÖΩÈ≠áÈ§çÈºπÈ∏ØÊù®Êâ¨Áñ°Èò≥ÁóíÂÖªÊ†∑ÁÇÄÁë∂ÊëáÂ∞ßÈÅ•Á™ëË∞£ËçØËΩ∫ÈπûÈ≥êÁà∑È°µ‰∏öÂè∂Èù•Ë∞íÈÇ∫ÊôîÁÉ®ÂåªÈì±È¢êÈÅó‰ª™ËöÅËâ∫‰∫øÂøÜ‰πâËØ£ËÆÆË∞äËØëÂºÇÁªéËØíÂëìÂ≥ÑÈ•¥ÊÄøÈ©øÁº¢ËΩ∂Ë¥ªÈíáÈïíÈï±ÁòóËà£Ëç´Èò¥Èì∂È•ÆÈöêÈìüÁòæÊ®±Â©¥Èπ∞Â∫îÁº®ËéπËê§Ëê•ËçßËùáËµ¢È¢ñËåîËé∫Ëê¶Ëì•ÊíÑÂò§Êª¢ÊΩÜÁíéÈπ¶ÁòøÈ¢èÁΩÇÂìüÊã•‰Ω£ÁóàË∏äÂíèÈïõ‰ºòÂøßÈÇÆÈìÄÁäπËØ±Ëé∏ÈìïÈ±øËàÜÈ±ºÊ∏îÂ®±‰∏éÂ±øËØ≠Áã±Ë™âÈ¢ÑÈ©≠‰ºõ‰ø£Ë∞ÄË∞ïËì£ÂµõÈ•´ÈòàÂ¶™Á∫°ËßéÊ¨§Èí∞ÈπÜÈπ¨ÈæâÈ∏≥Ê∏äËæïÂõ≠ÂëòÂúÜÁºòËøúÊ©ºÈ∏¢ÈºãÁ∫¶Ë∑ÉÈí•Á≤§ÊÇ¶ÈòÖÈí∫ÈÉßÂåÄÈô®ËøêËï¥ÈÖùÊôïÈüµÈÉìËä∏ÊÅΩÊÑ†Á∫≠Èü´ÊÆíÊ∞≤ÊùÇÁÅæËΩΩÊîíÊöÇËµûÁìíË∂±ÈåæËµÉËÑèÈ©µÂáøÊû£Ë¥£Êã©ÂàôÊ≥ΩËµúÂïßÂ∏ªÁÆ¶Ë¥ºË∞ÆËµ†ÁªºÁºØËΩßÈì°Èó∏Ê†ÖËØàÊñãÂÄ∫ÊØ°ÁõèÊñ©ËæóÂ¥≠Ê†àÊàòÁªΩË∞µÂº†Ê∂®Â∏êË¥¶ËÉÄËµµËØèÈíäËõ∞ËæôÈîóËøôË∞™ËæÑÈπßË¥ûÈíà‰æ¶ËØäÈïáÈòµÊµàÁºúÊ°¢ËΩ∏ËµàÁ•ØÈ∏©Êå£ÁùÅÁã∞‰∫âÂ∏ßÁóáÈÉëËØÅËØ§Â≥•Èí≤ÈìÆÁ≠ùÁªáËÅåÊâßÁ∫∏ÊåöÊé∑Â∏úË¥®ÊªûÈ™òÊ†âÊ†ÄËΩµËΩæË¥ΩÈ∏∑Ëõ≥Áµ∑Ë∏¨Ë∏ØËßØÈíüÁªàÁßçËÇø‰ºóÈî∫ËØåËΩ¥Áö±ÊòºÈ™§Á∫£ÁªâÁå™ËØ∏ËØõÁÉõÁû©Âò±Ë¥ÆÈì∏È©ª‰º´Êß†Èì¢‰∏ìÁ†ñËΩ¨ËµöÂï≠È¶îÈ¢ûÊ°©Â∫ÑË£ÖÂ¶ÜÂ£ÆÁä∂Èî•ËµòÂù†ÁºÄÈ™ìÁºíË∞ÜÂáÜÁùÄÊµäËØºÈïØÂÖπËµÑÊ∏çË∞òÁºÅËæéËµÄÁú¶Èî±ÈæáÈ≤ªË∏™ÊÄªÁ∫µÂÅ¨ÈÇπËØπÈ©∫È≤∞ËØÖÁªÑÈïûÈíªÁºµË∫úÈ≥üÁø±Âπ∂ÂçúÊ≤â‰∏ëÊ∑ÄËø≠ÊñóËåÉÂπ≤ÁöãÁ°ÖÊüúÂêé‰ºôÁß∏Êù∞ËØÄÂ§∏ÈáåÂáå‰πàÈúâÊçªÂáÑÊâ¶Âú£Â∞∏Êä¨Ê∂ÇÊ¥ºÂñÇÊ±°Èî®Âí∏ËùéÂΩùÊ∂åÊ∏∏ÂêÅÂæ°ÊÑøÂ≤≥‰∫ëÁÅ∂ÊâéÊú≠Á≠ë‰∫éÂøóÊ≥®ÂáãËÆ†Ë∞´ÈÉÑÂãêÂáºÂùÇÂûÖÂû¥ÂüØÂüùËãòËç¨ËçÆËéúËéºËè∞ËóÅÊè∏ÂêíÂê£ÂíîÂíùÂí¥ÂôòÂôºÂöØÂπûÂ≤ôÂµ¥ÂΩ∑ÂæºÁä∏ÁãçÈ¶ÄÈ¶áÈ¶ìÈ¶ïÊÑ£ÊÜ∑Êáî‰∏¨Ê∫ÜÊªüÊ∫∑Êº§ÊΩ¥ÊæπÁîØÁ∫üÁªîÁª±ÁèâÊûßÊ°äÊ°âÊßîÊ©•ËΩ±ËΩ∑ËµçËÇ∑ËÉ®È£öÁÖ≥ÁÖÖÁÜòÊÑçÊ∑ºÁ†úÁ£ôÁúçÈíöÈí∑ÈìòÈìûÈîÉÈîçÈîéÈîèÈîòÈîùÈî™Èî´ÈîøÈïÖÈïéÈï¢Èï•Èï©Èï≤Á®ÜÈπãÈπõÈπ±Áñ¨Áñ¥ÁóñÁôØË£•Ë•ÅËÄ¢È¢•Ëû®È∫¥È≤ÖÈ≤ÜÈ≤áÈ≤ûÈ≤¥È≤∫È≤ºÈ≥äÈ≥ãÈ≥òÈ≥ôÈûíÈû¥ÈΩÑ';
const T_CHARS = 'ÈåíÁööËóπÁ§ôÊÑõÂôØÂ¨°Áí¶ÊõñÈùÑË´≥Èä®Èµ™È™ØË•ñÂ•ßÂ™ºÈ©ÅÈ∞≤Â£©ÁΩ∑ÈàÄÊì∫ÊïóÂîÑÈ†íËæ¶ÁµÜÈàëÂπ´Á∂ÅÈéäË¨óÂâùÈ£ΩÂØ∂Â†±ÈÆëÈ¥áÈΩôËº©Ë≤ùÈãáÁãΩÂÇôÊÜäÈµØË≥ÅÈåõÁπÉÁ≠ÜÁï¢ÊñÉÂπ£ÈñâËìΩÂó∂ÊΩ∑ÈâçÁØ≥ËπïÈÇäÁ∑®Ë≤∂ËÆäËæØËæÆËäêÁ∑∂Á±©Ê®ôÈ©ÉÈ¢ÆÈ£ÜÈè¢Èë£È∞æÈ±âÂà•ÁôüÁÄïÊø±Ë≥ìÊìØÂÑêÁπΩÊ™≥ÊÆØËáèÈëåÈ´ïÈ¨¢È§ÖÁ®üÊí•ÁºΩÈâëÈßÅÈ§ëÈà∏ÈµìË£úÈàΩË≤°ÂèÉË†∂ÊÆòÊÖöÊÖòÁá¶È©ÇÈª≤ËíºËâôÂÄâÊªÑÂªÅÂÅ¥ÂÜäÊ∏¨ÊÉªÂ±§Ë©´Èç§ÂÑïÈáµÊîôÊëªËü¨È•ûËÆíÁ∫èÈèüÁî¢Èó°È°´ÂõÖË´ÇËÆñËïÜÊá∫Â¨ãÈ©èË¶òÁ¶™ÈêîÂ†¥ÂòóÈï∑ÂÑüËÖ∏Âª†Êö¢ÂÄÄËêáÊÇµÈñ∂ÈØßÈàîËªäÂæπÁ°®Â°µÈô≥Ë•ØÂÇñË´∂Ê´¨Á££ÈΩîÊíêÁ®±Êá≤Ë™†È®ÅÊ£ñÊ™âÈãÆÈê∫Áô°ÈÅ≤È¶≥ÊÅ•ÈΩíÁÜæÈ£≠È¥üÊ≤ñË°ùËü≤ÂØµÈäÉÁñáË∫äÁ±åÁ∂¢ÂÑîÂπ¨ËÆéÊ´•ÂªöÈã§ÈõõÁ§éÂÑ≤Ëß∏ËôïËäªÁµÄË∫ïÂÇ≥ÈáßÁò°ÈóñÂâµÊÑ¥ÈåòÁ∂ûÁ¥îÈ∂âÁ∂ΩËºüÈΩ™Ëæ≠Ë©ûË≥úÈ∂øËÅ∞Ëî•Âõ™ÂæûÂè¢ËìØÈ©ÑÊ®ÖÊπäËº≥Ë∫•Á´ÑÊîõÈåØÈäºÈπ∫ÈÅîÂô†ÈüÉÂ∏∂Ë≤∏ÈßòÁ¥øÊìîÂñÆÈÑ≤Êí£ËÜΩÊÜöË™ïÂΩàÊÆ´Ë≥ßÁôâÁ∞ûÁï∂ÊìãÈª®Ëï©Ê™îËÆúÁ¢≠Ë•†ÊêóÂ≥∂Á¶±Â∞éÁõúÁáæÁáàÈÑßÈêôÊïµÊªåÈÅûÁ∑†Á≥¥Ë©ÜË´¶Á∂àË¶øÈèëÈ°õÈªûÂ¢äÈõªÂ∑îÈàøÁô≤Èá£Ë™øÈäöÈØõË´úÁñäÈ∞àÈáòÈ†ÇÈå†Ë®ÇÈãå‰∏üÈä©Êù±ÂãïÊ£üÂáçÂ¥†È∂áÁ´áÁä¢Áç®ËÆÄË≥≠ÈççÁÄÜÊ´ùÁâòÁØ§Èª∑ÈçõÊñ∑Á∑ûÁ±™ÂÖåÈöäÂ∞çÊáüÈêìÂô∏È†ìÈàçÁáâË∫âÂ•™Â¢ÆÈê∏ÈµùÈ°çË®õÊÉ°È§ìË´§Â†äÈñºËªõÈã®ÈçîÈ∂öÈ°éÈ°ìÈ±∑Ë™íÂÖíÁàæÈ§åË≤≥ÈÇáÈâ∫È¥ØÈÆûÁôºÁΩ∞Èñ•Áê∫Á§¨Èá©ÁÖ©Ë≤©È£ØË®™Á¥°ÈàÅÈ≠¥È£õË™πÂª¢Ë≤ªÁ∑ãÈê®ÈØ°Á¥õÂ¢≥Â•ÆÊÜ§Á≥ûÂÉ®Ë±êÊ•ìÈãíÈ¢®ÁòãÈ¶ÆÁ∏´Ë´∑È≥≥ÁÅÉËÜöËºªÊí´ËºîË≥¶Âæ©Ë≤†Ë®ÉÂ©¶Á∏õÈ≥ßÈßôÁ¥±Á¥ºË≥ªÈ∫©ÈÆíÈ∞íÈáìË©≤Èà£ËìãË≥ÖÊ°øË∂ïÁ®àË¥õÂ∞∑ÊêüÁ¥∫Â≤°ÂâõÈãºÁ∂±Â¥óÊàáÈé¨Áù™Ë™•Á∏ûÈãØÊì±È¥øÈñ£ÈâªÂÄãÁ¥áÈéòÊΩÅÁµ¶‰∫ôË≥°Á∂ÜÈØÅÈæîÂÆÆÈûèË≤¢Èâ§Ê∫ùËåçÊßãË≥ºÂ§†Ë©¨Á∑±Ë¶ØË†±È°ßË©ÅËΩÇÈà∑ÈåÆÈ¥£Èµ†È∂ªÂâÆÊéõÈ¥∞ÊëëÈóúËßÄÈ§®ÊÖ£Ë≤´Ë©øÊëúÈ∏õÈ∞•Âª£Áç∑Ë¶èÊ≠∏ÈæúÈñ®ËªåË©≠Ë≤¥ÂääÂå≠ÂäåÂ™ØÊ™úÈÆ≠È±ñËº•ÊªæË¢ûÁ∑ÑÈØÄÈçãÂúãÈÅéÂ†ùÂíºÂπóÊß®ËüàÈâøÈß≠ÈüìÊº¢ÈóûÁµéÈ†°ËôüÁÅùÈ°•Èñ°È∂¥Ë≥ÄË®∂ÈóîË†£Ê©´ËΩüÈ¥ªÁ¥ÖÈªåË®åËëíÈñéÈ±üÂ£∫Ë≠∑Êª¨Êà∂Êª∏È∂òÂò©ËèØÁï´ÂäÉË©±È©äÊ®∫ÈèµÊá∑Â£ûÊ≠°Áí∞ÈÇÑÁ∑©ÊèõÂñöÁòìÁÖ•Ê∏ôÂ•êÁπØÈç∞ÈØáÈªÉË¨äÈ∞âÊèÆËºùÊØÄË≥ÑÁ©¢ÊúÉÁá¥ÂåØË´±Ë™®Áπ™Ë©ºËñàÂô¶ÊæÆÁπ¢ÁêøÊöâËë∑Ê∏æË´¢È§õÈñΩÁç≤Ë≤®Á¶çÈà•ÈëäÊìäÊ©üÁ©çÈ•ëË∑°Ë≠èÈõûÁ∏æÁ∑ùÊ•µËºØÁ¥öÊì†ÂπæËñäÂäëÊøüË®àË®òÈöõÁπºÁ¥ÄË®êË©∞Ëñ∫Âò∞ÂöåÈ©•Áí£Ë¶¨ÈΩèÁ£ØÁæàË†ÜË∫ãÈúΩÈ±≠ÈØΩÂ§æËé¢È†∞Ë≥àÈâÄÂÉπÈßïÈÉüÊµπÈãèÈéµËüØÊÆ≤Áõ£Â†ÖÁÆãÈñìËâ±Á∑òÁπ≠Ê™¢Â†øÈπºÊèÄÊíøÁ∞°ÂÑâÊ∏õËñ¶Ê™ªÈëíË∏êË≥§Ë¶ãÈçµËâ¶ÂäçÈ§ûÊº∏Êø∫ÊæóË´´Á∏ëÊàîÊà©ÁûºÈ∂ºÁ≠ßÈ∞πÈüâÂ∞áÊºøËî£Êß≥ÁçéË¨õÈÜ¨Áµ≥ÈüÅËÜ†ÊæÜÈ©ïÂ¨åÊî™Èâ∏ÁüØÂÉ•ËÖ≥È§ÉÁπ≥ÁµûËΩéËºÉÊíüÂ∂†È∑¶ÈÆ´ÈöéÁØÄÊΩîÁµêË™°Â±ÜÁô§È†úÈÆöÁ∑äÈå¶ÂÉÖË¨πÈÄ≤ÊôâÁáºÁõ°ÂãÅËçäËéñÂ∑πËóéÈ•âÁ∏âË¥êË¶≤ÈØ®È©öÁ∂ìÈ†∏ÈùúÈè°ÂæëÁóôÁ´∂ÂáàÂâÑÊ∂áÈÄïÂº≥ËÑõÈùöÁ≥æÂªÑËàäÈ¨ÆÈ≥©È∑≤ÈßíËàâÊìöÈã∏ÊáºÂäáË©éÂ±®Ê´∏È¢∂ÈâÖÈã¶Á™∂ÈΩüÈµëÁµπÈåàÈê´ÈõãË¶∫Ê±∫ÁµïË≠éÁé®ÈàûËªçÈßøÁö∏ÈñãÂá±Ââ¥Â°èÊÑæÊÑ∑ÈéßÈçáÈæïÈñåÈàßÈä¨È°ÜÊÆºË™≤È®çÁ∑ôËªªÈà≥ÈåÅÈ†∑Â¢æÊááÈΩ¶ÈèóÊë≥Â∫´Ë§≤Âö≥Â°äÂÑàÈÑ∂Âô≤ËÜæÂØ¨Áç™È´ñÁ§¶Êõ†Ê≥ÅË™ÜË™ëÈÑ∫Â£ôÁ∫äË≤∫ËôßÂ∑ãÁ™∫È•ãÊΩ∞Âå±Ëï¢ÊÜíËÅµÁ∞£Èñ´ÈåïÈØ§Êì¥ÈóäË†êË†üËáòËêä‰æÜË≥¥Â¥çÂæ†Ê∑∂ÁÄ®Ë≥öÁùûÈå∏Áô©Á±üËóçÊ¨ÑÊîîÁ±ÉÈóåËò≠ÁÄæËÆïÊî¨Ë¶ΩÊá∂Á∫úÁàõÊø´ÂµêÊ¨ñÊñïÈë≠Ë•§ÁëØÈñ¨ÈãÉÊíàÂãûÊæáÂòÆÂ∂óÈä†ÈêíÁôÜÊ®ÇÈ∞≥Èê≥Â£òÈ°ûÊ∑öË™ÑÁ∏≤Á±¨Ë≤çÈõ¢ÈØâÁ¶ÆÈ∫óÂé≤ÂãµÁ§´Ê≠∑ÁÄùÈö∏ÂÑ∑ÈÖàÂ£¢Ëó∂ËíûËò∫Âö¶ÈÇêÈ©™Á∏≠Ê´™Ê´üËΩ¢Á§™Èã∞È∏ùÁôòÁ≥≤Ë∫íÈùÇÈ±∫È±ßÂÄÜËÅØËìÆÈÄ£ÈêÆÊÜêÊº£Á∞æÊñÇËáâÈèàÊàÄÁÖâÁ∑¥ËòûÂ•©ÁÄ≤ÁíâÊÆÆË§≥Ë•ùÈ∞±Á≥ßÊ∂ºÂÖ©ËºõË´íÈ≠éÁôÇÈÅºÈêêÁπöÈáïÈ∑ØÁçµËá®ÈÑ∞È±óÂáúË≥ÉËó∫Âª©Ê™ÅËΩîË∫™ÈΩ°Èà¥ÈùàÂ∂∫È†òÁ∂æÊ¨ûËü∂ÈØ™È§æÂäâÁÄèÈ®ÆÁ∂πÈé¶È∑öÈæçËÅæÂö®Á±†Â£üÊîèÈö¥Ëò¢ÁÄßÁìèÊ´≥ÊúßÁ§±Ê®ìÂ©ÅÊëüÁ∞çÂÉÇËîûÂòçÂ∂ÅÈè§Áò∫ËÄ¨ËûªÈ´èËòÜÁõßÈ°±Âª¨ÁàêÊìÑÈπµËôúÈ≠ØË≥ÇÁ•øÈåÑÈô∏Â£öÊìºÂöïÈñ≠ÁÄòÊ∑•Ê´®Ê´ìËΩ§ËºÖËΩÜÊ∞åËáöÈ∏ïÈ∑∫Ëâ´È±∏Â∑íÊî£Â≠øÁÅ§‰∫ÇËá†Â≠åÊ¨íÈ∏ûÈëæÊéÑËº™ÂÄ´‰æñÊ∑™Á∂∏Ë´ñÂúáËòøÁæÖÈÇèÈëºÁ±ÆÈ®æÈß±Áµ°ÁäñÁéÄÊøºÊ¨èËÖ°ÈèçÈ©¢ÂëÇÈãÅ‰æ∂Â±¢Á∏∑ÊÖÆÊøæÁ∂†Ê´öË§∏ÈãùÂò∏Â™ΩÁë™Á¢ºËûûÈ¶¨ÁΩµÂóéÂòúÂ¨§Ê¶™Ë≤∑È∫•Ë≥£ÈÇÅËÑàÂã±ÁûûÈ•ÖË†ªÊªøË¨æÁ∏µÈèùÈ°ôÈ∞ªË≤ìÈå®ÈâöË≤øÈ∫ºÊ≤íÈéÇÈñÄÊÇ∂ÂÄëÊç´ÁáúÊá£ÈçÜÈå≥Â§¢ÁûáË¨éÂΩåË¶ìÂÜ™ÁæãË¨êÁçºÁ¶∞Á∂øÁ∑¨Êæ†Èù¶ÈªΩÂªüÁ∑≤ÁπÜÊªÖÊÜ´Èñ©ÈñîÁ∑°È≥¥ÈäòË¨¨Ë¨®È©ÄÈ•ÉÊ≠øÈèåË¨ÄÁïùÈâ¨Âê∂ÈàâÁ¥çÈõ£ÊíìËÖ¶ÊÉ±È¨ßÈêÉË®•È§íÂÖßÊì¨ËÜ©ÈàÆÈØ¢ÊîÜËº¶ÈØ∞ÈáÄÈ≥•Ëî¶Ë£äËÅ∂ÂöôÈë∑Èé≥ÈöâËòóÂõÅÈ°¢Ë∫°Ê™∏Áç∞ÂØßÊì∞ÊøòËãßÂöÄËÅπÈàïÁ¥êËÜøÊøÉËæ≤ÂÑÇÂô•ÈßëÈáπË´æÂÑ∫ÁòßÊ≠êÈ∑óÊØÜÂòîÊºöË¨≥ÊÖ™ÁîåÁõ§Ëπ£ÈæêÊããÁö∞Ë≥†ËΩ°Âô¥Èµ¨Á¥ïÁæÜÈàπÈ®ôË´ûÈß¢È£ÑÁ∏πÈ†ªË≤ßÂ¨™ËòãÊÜëË©ïÊΩëÈ†óÈáôÊí≤Èã™Ê®∏Ë≠úÈè∑Èê†Ê£≤ËáçÈΩäÈ®éË±àÂïüÊ∞£Ê£ÑË®ñËòÑÈ®èÁ∂∫Ê¶øÁ£ßÈ†éÈ†èÈ∞≠ÁâΩÈá¨ÈâõÈÅ∑Á∞ΩË¨ôÈå¢ÈâóÊΩõÊ∑∫Ë≠¥Â°πÂÉâËïÅÊÖ≥È®´ÁπæÊßßÈàêÊßçÂóÜÂ¢ªËñîÂº∑Êê∂Â¨ôÊ™£ÊàßÁÜóÈåÜÈèòÈèπÁæ•ËπåÈç¨Ê©ãÂñ¨ÂÉëÁøπÁ´ÖË™öË≠ôËïéÁπ∞Á£ΩËπ∫Á´äÊÑúÈç•ÁØãÊ¨ΩË¶™ÂØ¢ÈãüËºïÊ∞´ÂÇæÈ†ÉË´ãÊÖ∂Êí≥ÈØñÁìäÁ™ÆÁÖ¢Ëõ∫Â∑∞Ë≥ïËü£È∞çË∂®ÂçÄËªÄÈ©ÖÈΩ≤Ë©òÂ∂áÈóÉË¶∑È¥ùÈ°¥Ê¨äÂã∏Ë©ÆÁ∂£ËºáÈäìÂçªÈµ≤Á¢∫ÈóãÈóïÊÑ®ËÆìÈ•íÊìæÁπûËïòÂ¨àÊ©àÁÜ±ÈüåË™çÁ¥âÈ£™ËªîÊ¶ÆÁµ®Â∂∏Ë†ëÁ∏üÈä£È°∞ËªüÈä≥ËúÜÈñèÊΩ§ÁÅëËñ©È¢ØÈ∞ìË≥ΩÂÇòÊØøÁ≥ùÂñ™È®∑ÊéÉÁπÖÊæÄÂóáÈä´Á©°ÊÆ∫ÂâéÁ¥óÈé©ÈØäÁØ©Êõ¨ÈáÉÂà™ÈñÉÈôúË¥çÁπïË®ïÂßçÈ®∏Èá§È±îÂ¢ëÂÇ∑Ë≥ûÂù∞ÊÆ§Ëß¥ÁáíÁ¥πË≥íÊîùÊáæË®≠ÂéôÁÅÑÁï¨Á¥≥ÂØ©Â¨∏ËÖéÊª≤Ë©µË´óÁÄãËÅ≤Áπ©ÂãùÂ∏´ÁçÖÊøïË©©ÊôÇËùïÂØ¶Ë≠òÈßõÂã¢ÈÅ©ÈáãÈ£æË¶ñË©¶Ë¨öÂ°íËíîÂºíËªæË≤∞Èà∞È∞£Â£ΩÁç∏Á∂¨Ê®ûËº∏Êõ∏Ë¥ñÂ±¨Ë°ìÊ®πË±éÊï∏ÊîÑÁ¥ìÂ∏•ÈñÇÈõôË™∞Á®ÖÈ†ÜË™™Á¢©ÁàçÈë†Áµ≤È£ºÂªùÈßüÁ∑¶Èç∂È∑•ËÅ≥ÊÖ´È†åË®üË™¶ÊìªËó™È§øÈ¢ºÈé™ËòáË®¥ËÇÖË¨ñÁ©åÈõñÈö®Á∂èÊ≠≤Ë™∂Â≠´ÊêçÁ≠çËìÄÁåªÁ∏ÆÁë£ÈéñÂó©ËÑßÁç∫ÊíªÈó•ÈâàÈ∞®Ëá∫ÊÖãÈà¶ÈÆêÊî§Ë≤™Áô±ÁÅòÂ£áË≠öË´áÂòÜÊõáÈâ≠ÈåüÈ†áÊπØÁáôÂÑªÈ§≥ÈêãÈèúÊø§Áµ≥Ë®éÈüúÈã±È®∞Ë¨ÑÈäªÈ°åÈ´îÂ±úÁ∑πÈµúÈóêÊ¢ùÁ≥∂ÈΩ†È∞∑Ë≤ºÈêµÂª≥ËÅΩÁÉ¥ÈäÖÁµ±ÊÖüÈ†≠ÈàÑÁ¶øÂúñÈá∑ÂúòÊë∂È†πËõªÈ£©ËÑ´È¥ïÈ¶±ÈßùÊ©¢Á±úÈºâË•™Â™ßËÜÉÂΩéÁÅ£È†ëËê¨Á¥àÁ∂∞Á∂≤ËºûÈüãÈÅïÂúçÁÇ∫Êø∞Á∂≠Ëë¶ÂÅâÂÅΩÁ∑ØË¨ÇË°õË´âÂπÉÈóàÊ∫àÊΩøÁëãÈüôÁÖíÈÆ™Ê∫´ËÅûÁ¥ãÁ©©ÂïèÈñøÁîïÊíæËù∏Ê∏¶Á™©Ëá•ËêµÈΩ∑ÂóöÈé¢ÁÉèË™£ÁÑ°Ëï™Âê≥Â°¢ÈúßÂãôË™§ÈÑîÂª°ÊÜÆÂ´µÈ®ñÈµ°È∂©Èå´ÁäßË•≤ÁøíÈäëÊà≤Á¥∞È§ºÈ¨©ÁíΩË¶°Ëù¶ËΩÑÂ≥Ω‰ø†ÁãπÂªàÂöáÁ°§ÈÆÆÁ∫ñË≥¢ÈäúÈñëÈ°ØÈö™ÁèæÁçªÁ∏£È§°Áæ®ÊÜ≤Á∑öËéßËñüËòöÂ≥¥Áç´Â´ªÈ∑¥ÁôáË†îÁßàË∫öÂªÇÈë≤ÈÑâË©≥ÈüøÈ†ÖËñåÈ§âÈ©§Á∑óÈ•óËï≠ÂõÇÈä∑ÊõâÂòØÂòµÁÄüÈ©çÁ∂ÉÊ¢üÁ∞´ÂçîÊåæÊîúËÑÖË´ßÂØ´ÁÄâË¨ùË§ªÊì∑Á¥≤Á∫àÈãÖÈáÅËààÈôòÊªéÂÖáÊ¥∂ÈäπÁπ°È•àÈµÇËôõÂôìÈ†àË®±ÊïòÁ∑íÁ∫åË©°È†äËªíÊá∏ÈÅ∏Áô¨Áµ¢Ë´ºÈââÈèáÂ≠∏Ë¨îÊæ©È±àÂãõË©¢Â∞ãÈ¶¥Ë®ìË®äÈÅúÂ°§ÊΩØÈ±òÂ£ìÈ¥âÈ¥®Âïû‰∫ûË®ùÂü°Â©≠Ê§èÊ∞¨ÈñπÁÖôÈπΩÂö¥Â∑ñÈ°èÈñªËâ∑Âé≠Á°ØÂΩ•Ë´∫È©óÂé¥Ë¥óÂÑºÂÖóËÆûÊá®ÈñÜÈáÖÈ≠òÈ•úÈº¥È¥¶Ê•äÊèöÁòçÈôΩÁô¢È§äÊ®£ÁÖ¨Áë§ÊêñÂ†ØÈÅôÁ™ØË¨†Ëó•Ëª∫È∑ÇÈ∞©Áà∫È†ÅÊ•≠ËëâÈù®Ë¨ÅÈÑ¥ÊõÑÁáÅÈÜ´Èä•È†§ÈÅ∫ÂÑÄËüªËóùÂÑÑÊÜ∂Áæ©Ë©£Ë≠∞Ë™ºË≠ØÁï∞ÁππË©íÂõàÂ∂ßÈ£¥ÊáåÈ©õÁ∏äËªºË≤ΩÈáîÈé∞ÈêøÁòûËâ§Ëî≠Èô∞ÈäÄÈ£≤Èö±Èä¶ÁôÆÊ´ªÂ¨∞È∑πÊáâÁ∫ìÁë©Ëû¢ÁáüÁÜíË†ÖË¥èÁ©éÂ°ãÈ∂ØÁ∏àÈé£ÊîñÂö∂ÁÄÖÁÄ†ÁìîÈ∏öÁô≠È†¶ÁΩåÂñ≤ÊìÅÂÇ≠Áô∞Ë∏¥Ë©†ÈèûÂÑ™ÊÜÇÈÉµÈàæÁå∂Ë™òËïïÈä™È≠∑ËºøÈ≠öÊºÅÂ®õËàáÂ∂ºË™ûÁçÑË≠ΩÈ†êÈ¶≠ÂÇ¥‰øÅË´õË´≠Ëï∑Â¥≥È£´ÈñæÂ´óÁ¥ÜË¶¶Ê≠üÈà∫ÈµíÈ∑∏ÈΩ¨È¥õÊ∑µËΩÖÂúíÂì°ÂúìÁ∑£ÈÅ†Ê´ûÈ≥∂ÈªøÁ¥ÑË∫çÈë∞Á≤µÊÇÖÈñ±ÈâûÈÑñÂãªÈöïÈÅãËòäÈÜûÊöàÈüªÈÑÜËïìÊÉ≤ÊÖçÁ¥úÈüûÊÆûÊ∞≥ÈõúÁÅΩËºâÊî¢Êö´Ë¥äÁìöË∂≤Èè®Ë¥ìËáüÈßîÈëøÊ£óË≤¨ÊìáÂâáÊæ§Ë≥æÂòñÂπòÁ∞ÄË≥äË≠ñË¥àÁ∂úÁπíËªãÈçòÈñòÊüµË©êÈΩãÂÇµÊ∞àÁõûÊñ¨ËºæÂ∂ÑÊ£ßÊà∞Á∂ªË≠´ÂºµÊº≤Â∏≥Ë≥¨ËÑπË∂ôË©îÈáóËüÑËΩçÈç∫ÈÄôË¨´ËºíÈ∑ìË≤ûÈáùÂÅµË®∫ÈéÆÈô£ÊπûÁ∏ùÊ•®Ëª´Ë≥ëÁ¶éÈ¥ÜÊéôÁùúÁåôÁà≠ÂπÄÁô•ÈÑ≠Ë≠âË´çÂ¥¢Èâ¶ÈåöÁÆèÁπîËÅ∑Âü∑Á¥ôÊëØÊì≤ÂπüË≥™ÊªØÈ®≠Ê´õÊ¢îËªπËºäË¥ÑÈ∑ôËûÑÁ∏∂Ë∫ìË∫ëËß∂ÈêòÁµÇÁ®ÆËÖ´ÁúæÈçæË¨ÖËª∏Áö∫ÊôùÈ©üÁ¥ÇÁ∏êË±¨Ë´∏Ë™ÖÁá≠ÁüöÂõëË≤ØÈëÑÈßê‰ΩáÊ´ßÈäñÂ∞àÁ£öËΩâË≥∫ÂõÄÈ•åÈ°≥Ê®ÅËéäË£ùÂ¶ùÂ£ØÁãÄÈåêË¥ÖÂ¢úÁ∂¥È®ÖÁ∏ãË´ÑÊ∫ñËëóÊøÅË´ëÈê≤Ëå≤Ë≥áÊº¨Ë´ÆÁ∑áËºúË≤≤Áú•ÈåôÈΩúÈØîËπ§Á∏ΩÁ∏±ÂÇØÈÑíË´èÈ®∂ÈØ´Ë©õÁµÑÈèÉÈâÜÁ∫òË∫¶È±íÁø∫‰∏¶ËîîÊ≤àÈÜúÊæ±Âè†È¨•ÁØÑÂππËáØÁüΩÊ´ÉÂæåÂ§•Á®≠ÂÇëË®£Ë™áË£èÊ∑©È∫ΩÈª¥ÊíöÊ∑íÊâ°ËÅñÂ±çÊì°Â°óÁ™™È§µÊ±ôÈçÅÈππË†çÂΩúÊπßÈÅäÁ±≤Á¶¶È°òÂ∂ΩÈõ≤Á´àÁ¥ÆÂäÑÁØâÊñºË™åË®ªÈõïË®ÅË≠æÈÉ§ÁåõÊ∞πÈò™Â£üÂ†ñÂûµÂ¢äÊ™æËïíËë§ËìßËíìËèáÊßÅÊë£Âí§ÂîöÂì¢ÂôùÂôÖÊíÖÂäàË¨îË•ÜÂ∂¥ËÑä‰ªøÂÉ•ÁçÅÈ∫ÖÈ§òÈ§∑È•äÈ•¢Ê•ûÊÄµÊáçÁàøÊºµÁÅ©Ê∑∑Êø´ÁÄ¶Ê∑°ÂØßÁ≥∏ÁµùÁ∑îÁëâÊ¢òÊ£¨Ê°àÊ©∞Ê´´Ëª≤Ëª§Ë≥´ËÜÅËÖñÈ£àÁ≥äÁÖÜÊ∫úÊπ£Ê∏∫Á¢∏ÊªæÁûòÈààÈâïÈã£Èä±Èã•Èã∂Èê¶ÈêßÈç©ÈçÄÈçÉÈåáÈéÑÈéáÈéøÈêùÈë•ÈëπÈëîÁ©≠È∂ìÈ∂•È∏åÁôßÂ±ôÁòÇËáíË•áÁπàËÄÆÈ°¨ËüéÈ∫ØÈÆÅÈÆÉÈÆéÈØóÈØùÈØ¥È±ùÈØøÈ∞†È∞µÈ±ÖÈûΩÈüùÈΩá';

const regionMap = {"‰∏≠ËèØÊ∞ëÂúã":"Âè∞Êπæ","‰∏≠ÂçéÊ∞ëÂõΩ":"Âè∞Êπæ","‰øÑÁΩóÊñØËÅîÈÇ¶":"‰øÑÁΩóÊñØ","Âæ∑ÊÑèÂøóËÅîÈÇ¶ÂÖ±ÂíåÂõΩ":"Âæ∑ÂõΩ","Libya":"Âà©ÊØî‰∫ö","Dubai":"Ëø™Êãú","Fujairah":"ÂØåÊü•‰ºäÊãâ","ImƒÅrat Umm al Qaywayn":"‰πåÂßÜÁõñ‰∏á","F√®s-Mekn√®s":"ÈùûÊñØ-Ê¢ÖÂÖãÂÜÖÊñØ","Tirana":"Âú∞ÊãâÈÇ£","Vienna":"Áª¥‰πüÁ∫≥","new south wales":"Êñ∞ÂçóÂ®ÅÂ∞îÂ£´","New South Wales":"Êñ∞ÂçóÂ®ÅÂ∞îÂ£´","Victoria":"Áª¥Â§öÂà©‰∫ö","Buenos Aires F.D.":"Â∏ÉÂÆúËØ∫ÊñØËâæÂà©ÊñØ","Baku City":"Â∑¥Â∫ì","Lankaran Rayon":"ËøûÁßëÂÖ∞","Â∏ÉÈ≤ÅÂ°ûÂ∞îÈ¶ñÈÉΩÂ§ßÂå∫":"Â∏ÉÈ≤ÅÂ°ûÂ∞î","Sofia-Capital":"Á¥¢Èùû‰∫ö","Sao Paulo":"Âú£‰øùÁΩó","Ontario":"ÂÆâÂ§ßÁï•","Quebec":"È≠ÅÂåóÂÖã","Zurich":"ËãèÈªé‰∏ñ","Âú£Âú∞‰∫öÂì•È¶ñÈÉΩÂ§ßÂå∫":"Âú£Âú∞‰∫öÂì•","Bogota D.C.":"Ê≥¢Âì•Â§ß","Provincia de San Jos√©":"Âú£‰ΩïÂ°û","Ëá∫ÂåóÂ∏Ç":"Âè∞Âåó","Ëá∫ÁÅ£ÁúÅ or Âè∞ÁÅ£ÁúÅ":"Âè∞Âåó","Taiwan":"Âè∞Êπæ","Changhua":"ÂΩ∞Âåñ","Taichung City":"Âè∞‰∏≠","Taoyuan":"Ê°ÉÂõ≠","Yunlin":"‰∫ëÊûó","Havana":"ÂìàÁì¶ÈÇ£","Prague":"Â∏ÉÊãâÊ†º","Áü≥ÂãíËãèÁõäÊ†º-Ëç∑Â∞îÊñØÊ≥∞Âõ†":"Áü≥Ëç∑Â∑û","Hesse":"ÈªëÊ£Æ","Capital Region":"Âì•Êú¨ÂìàÊ†π","Catalonia":"Âä†Ê≥∞ÁΩóÂ∞º‰∫ö","Madrid":"È©¨Âæ∑Èáå","Ê≥ïÂÖ∞Ë•øÂ≤õ":"Ê≥ïÂÖ∞Ë•øÂ≤õ","Â•ßÂºóÊ∂Ö-ÁæÖË®•-ÈòøÁàæÂçëÊñØÂ§ßÂçÄ":"Â••ÁΩóÈòøÂ§ßÂå∫","ÊôÆÁΩóÊó∫ÊñØ-ÈòøÂ∞îÂçëÊñØ-ËîöËìùÊµ∑Â≤∏Â§ßÂå∫":"ÊôÆÈòøËìùÂ§ßÂå∫","√éle-de-France":"Ê≥ïÂÖ∞Ë•øÂ≤õ","City of Zagreb":"Ëê®Ê†ºÂãíÂ∏É","Wales":"Â®ÅÂ∞îÂ£´","Sermersooq":"ÁëüÈªòÁ¥¢ÂÖã","Attica":"ÈòøÊèêÂç°","Greater Accra Region":"Â§ßÈòøÂÖãÊãâ","Kowloon":"‰πùÈæô","Wong Tai Sin":"ÈªÑÂ§ß‰ªôÂå∫","Sai Kung District":"Ë•øË¥°Âå∫","Sham Shui Po":"Ê∑±Ê∞¥ÂüóÂå∫","Tsuen Wan District":"ËçÉÊπæÂå∫","Budapest":"Â∏ÉËææ‰Ω©ÊñØ","Jakarta":"ÈõÖÂä†Ëææ","Tel Aviv":"ÁâπÊãâÁª¥Â§´","National Capital Territory of Delhi":"Âæ∑Èáå","Southern Peninsula":"Èõ∑ÂÖãÈõÖÊú™ÂÖã","Lombardy":"‰º¶Â∑¥Á¨¨","Lazio":"ÊãâÈΩêÂ••","Tokyo":"‰∏ú‰∫¨ÈÉΩ","Osaka":"Â§ßÈò™Â∫ú","≈åsaka":"Â§ßÈò™Â∫ú","Mto Panga":"ÂßÜÊâòÊΩòÂä†","Daegu":"Â§ßÈÇ±","Gangwon-do":"Ê±üÂéüÈÅì","Jeollabuk-do":"ÂÖ®ÁΩóÂåóÈÅì","Incheon":"‰ªÅÂ∑ù","North Chungcheong":"Âø†Ê∏ÖÂåóÈÅì","Phnom Penh":"ÈáëËæπ","Almaty":"ÈòøÊãâÊú®Âõæ","Almaty Oblysy":"ÈòøÊãâÊú®Âõæ","Aqmola":"ÈòøÂÖãËé´Êãâ","Astana":"ÈòøÊñØÂ°îÁ∫≥","Zhambyl Oblysy":"Ê±üÂ∏ÉÂ∞î","Diekirch":"Ëø™Âü∫Â∏å","Luxembourg":"Âç¢Ê£ÆÂ†°","Rƒ´ga":"ÈáåÂä†","Sha‚Äòbƒ´yat BanghƒÅzƒ´":"Áè≠Âä†Ë•ø","Chi»ôinƒÉu Municipality":"Âü∫Â∏åËÆ∑‰πå","Grand Port District":"Â§ßÊ∏ØÂå∫","Kuala Lumpur":"ÂêâÈöÜÂù°","Ulaanbaatar":"‰πåÂÖ∞Â∑¥Êâò","Lagos":"ÊãâÂêÑÊñØ","North Holland":"ÂåóËç∑ÂÖ∞","Oslo County":"Â••ÊñØÈôÜ","Viken":"Áª¥ËÇØÈÉ°","Bagmati Province":"Â∑¥Ê†ºÈ©¨ËíÇ","Muscat":"È©¨ÊñØÂñÄÁâπ","Metro Manila":"È©¨Â∞ºÊãâ","Northern Mindanao":"ÂåóÊ£âÂÖ∞ËÄÅ","Mazovia":"È©¨‰ΩêÂ§´Ëàç","Belgrade":"Ë¥ùÂ∞îÊ†ºËé±Âæ∑","Moscow":"Ëé´ÊñØÁßë","St.-Petersburg":"Âú£ÂΩºÂæóÂ†°","Tatarstan Republic":"ÈûëÈùºÊñØÂù¶","Bucure»ôti":"Â∏ÉÂä†ÂãíÊñØÁâπ","Mecca Region":"È∫¶Âä†","Honiara":"ÈúçÂ∞º‰∫öÊãâ","Stockholm":"ÊñØÂæ∑Âì•Â∞îÊë©","Stockholm County":"ÊñØÂæ∑Âì•Â∞îÊë©","Central Singapore":"Êñ∞Âä†Âù°‰∏≠Âå∫","North West":"Êñ∞Âä†Âù°Ë•øÂåó","North East":"Êñ∞Âä†Âù°‰∏úÂåó","South West":"Êñ∞Âä†Âù°Ë•øÂçó","South East":"Êñ∞Âä†Âù°‰∏úÂçó","Banaadir":"Áè≠Á∫≥Ëø™Â∞î","Zanzibar Urban/West":"Ê°ëÁªôÂ∑¥Â∞î","Ang Thong":"Á∫¢ÁªüÂ∫ú","Kyiv City":"Âü∫ËæÖ","Âä†Â∑û":"Âä†Âà©Á¶èÂ∞º‰∫ö","È∫ªËñ©Ë´∏Â°ûÂ∑û":"È©¨Ëê®ËØ∏Â°û","Arizona":"‰∫öÂà©Ê°ëÈÇ£","Miranda":"Á±≥ÂÖ∞Ëææ","Hanoi":"Ê≤≥ÂÜÖ","H√≤a B√¨nh Province":"ÂíåÂπ≥ÁúÅ","H·∫£i D∆∞∆°ng Province":"Êµ∑Èò≥ÁúÅ","Ho Chi Minh City (HCMC)":"ËÉ°ÂøóÊòéÂ∏Ç","Hai Phong":"Êµ∑Èò≤","Da Nang City":"Â≤òÊ∏Ø"};

// --- 1. Êï∞ÊçÆËé∑Âèñ ---
async function fetchAllData() {
  try {
    const geoReq = new Request(geoUrl);
    geoReq.timeoutInterval = 10;
    const riskReq = new Request(riskUrl);
    riskReq.timeoutInterval = 10;

    const [geo, risk] = await Promise.all([
      geoReq.loadJSON().catch(() => null),
      riskReq.loadJSON().catch(() => null)
    ]);

    if (!geo || geo.status !== "success") return null;

    let country = processField(regionMap[geo.country] || geo.country);
    let region = processField(regionMap[geo.regionName] || geo.regionName);

    let finalLocation = (country.includes(region) || region.includes(country) || country === region || !region) 
                        ? country 
                        : `${country} ${region}`;

    return {
      ip: geo.query,
      location: finalLocation.toUpperCase(),
      isp: processField(geo.isp) || geo.isp,
      asn: geo.as ? geo.as.split(' ')[0] : "AS----",
      countryCode: geo.countryCode,
      fraudScore: risk ? (risk.fraudScore || 0) : 0,
      isResidential: risk ? risk.isResidential : false,
      isBroadcast: risk ? risk.isBroadcast : true
    };
  } catch (e) {
    console.log("Êï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•: " + e);
    return null;
  }
}

// --- 2. Èò∂Ê¢ØÂ†ÜÂè†ÁÆóÊ≥ï ---
function getStackedGradient(score) {
  const thresholds = [0, 15, 25, 40, 50, 70, 100];
  const allColors = ["#A16DB3", "#955BA6", "#8A4A99", "#7F398C", "#712D80", "#5D1E73", "#4A148C"];
  let activeColors = [];
  let locations = [];
  for (let i = 0; i < thresholds.length; i++) {
    if (score >= thresholds[i]) {
      activeColors.push(new Color(allColors[i]));
      locations.push(thresholds[i] / (score || 1)); 
    }
  }
  if (score > 0 && !thresholds.includes(score)) {
    activeColors.push(new Color(allColors[Math.min(activeColors.length - 1, allColors.length - 1)]));
    locations.push(1.0);
  }
  return { colors: activeColors.reverse(), locations: locations.map(l => 1 - l).reverse() };
}

// --- 3. UI Ê∏≤Êüì ---
async function createWidget(data) {
  let w = new ListWidget();
  const padding = 12;
  w.setPadding(padding, padding, padding, padding); 
  
  const isDark = Device.isUsingDarkAppearance();
  const mainColor = isDark ? Color.white() : Color.black();
  const pillBg = isDark ? new Color("#3a3a3c", 0.6) : new Color("#e5e5ea", 0.9);

  let bgGradient = new LinearGradient();
  bgGradient.colors = isDark 
    ? [new Color("#1c1c1e"), new Color("#000000")] 
    : [new Color("#f2f2f7"), new Color("#ffffff")];
  w.backgroundGradient = bgGradient;

  if (!data) return w;

  w.addSpacer();

  // Header
  let header = w.addStack();
  header.centerAlignContent();
  header.addSpacer(); 
  header.addText(getFlagEmoji(data.countryCode)).font = Font.systemFont(18);
  header.addSpacer(6);
  let locText = header.addText(data.location); 
  locText.font = Font.heavySystemFont(12);
  locText.textColor = mainColor;
  locText.lineLimit = 1;
  header.addSpacer();

  w.addSpacer(10); 

  // Content
  let contentArea = w.addStack();
  contentArea.layoutHorizontally();
  contentArea.centerAlignContent();

  const rowGap = 5;          
  const infoRowHeight = 22;  
  const barWidth = 6;        
  const totalBarHeight = (infoRowHeight * 4) + (rowGap * 3);

  // Risk Bar
  let riskContainer = contentArea.addStack();
  riskContainer.size = new Size(barWidth, totalBarHeight);
  riskContainer.cornerRadius = 3;
  riskContainer.backgroundColor = pillBg; 
  riskContainer.layoutVertically();
  riskContainer.addSpacer();
  let progressBar = riskContainer.addStack();
  progressBar.size = new Size(barWidth, totalBarHeight * (data.fraudScore / 100));
  progressBar.cornerRadius = 3;
  let g = new LinearGradient();
  let gd = getStackedGradient(data.fraudScore);
  g.colors = gd.colors;
  g.locations = gd.locations;
  progressBar.backgroundGradient = g;

  contentArea.addSpacer(10); 

  // Info Pills
  let infoCol = contentArea.addStack();
  infoCol.layoutVertically();
  const infoWidth = 108; 

  const addPill = (text, fontSize) => {
    let p = infoCol.addStack();
    p.size = new Size(infoWidth, infoRowHeight);
    p.backgroundColor = pillBg;
    p.cornerRadius = 6;
    p.centerAlignContent();
    let t = p.addText(text);
    t.font = Font.boldSystemFont(fontSize);
    t.textColor = mainColor;
    t.lineLimit = 1;
    t.minimumScaleFactor = 0.8;
  };

  addPill(data.ip, 11);
  infoCol.addSpacer(rowGap);
  addPill(data.isp.toUpperCase(), 8.5);
  infoCol.addSpacer(rowGap);
  addPill(data.asn, 8.5);
  infoCol.addSpacer(rowGap);

  let lastRow = infoCol.addStack();
  lastRow.layoutHorizontally();
  const smallWidth = (infoWidth - rowGap) / 2;
  const createTag = (text) => {
    let tag = lastRow.addStack();
    tag.size = new Size(smallWidth, infoRowHeight);
    tag.backgroundColor = pillBg;
    tag.cornerRadius = 6;
    tag.centerAlignContent();
    let st = tag.addText(text);
    st.font = Font.boldSystemFont(8.5);
    st.textColor = mainColor;
  };
  createTag(data.isResidential ? "‰ΩèÂÆÖ IP" : "Êú∫Êàø IP");
  lastRow.addSpacer(rowGap);
  createTag(data.isBroadcast ? "ÂéüÁîü IP" : "ÂπøÊí≠ IP");

  w.addSpacer(); 
  return w;
}

// --- 4. Â∑•ÂÖ∑ÂáΩÊï∞ ---
function getFlagEmoji(c) {
  return c ? c.toUpperCase().replace(/./g, x => String.fromCodePoint(127397 + x.charCodeAt())) : "üåê";
}

function processField(str) {
  if (!str) return "";
  let result = "";
  for (const char of String(str)) {
    const idx = T_CHARS.indexOf(char);
    result += (idx !== -1 ? S_CHARS[idx] : char);
  }
  return result.trim();
}

// --- ÊâßË°å ---
const data = await fetchAllData();
let widget = await createWidget(data);
if (!config.runsInWidget) await widget.presentSmall();
Script.setWidget(widget);
Script.complete();
